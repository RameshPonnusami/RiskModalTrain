<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Correlation Heatmap</title>
  <style>
    /* Add some basic styling */
    body {
      font-family: Arial, sans-serif;
    }

    table {
      border-collapse: collapse;
      width: 100%;
    }

    th, td {
      border: 1px solid #ccc;
      padding: 8px;
      text-align: center;
    }

    /* Define colors for heatmap as CSS classes */
    .heatmap-cell-1 { background-color: #d0e8ff; } /* Light Blue */
    .heatmap-cell-2 { background-color: #81b9e1; } /* Blue */
    .heatmap-cell-3 { background-color: #4180c8; } /* Dark Blue */
    .heatmap-cell-4 { background-color: #1a478f; } /* Navy Blue */
    .heatmap-cell-5 { background-color: #5262b1; } /* Light Red */
    .heatmap-cell-6 { background-color: #737683; } /* Red */
  </style>
</head>
<body>

<script>
  function generateTable(data) {
    var table = '<table>';

    // Create table header
    table += '<thead><tr><th></th>';
    for (var i = 0; i < data.length; i++) {
      table += '<th>' + data[i]['index'] + '</th>';
    }
    table += '</tr></thead><tbody>';

    // Create table rows
    for (var i = 0; i < data.length; i++) {
      table += '<tr>';
      // Add correlation index column
      table += '<td>' + data[i]['index'] + '</td>';
      for (var j = 0; j < data.length; j++) {
        var value = data[i][data[j]['index']];
        var colorClass = getColor(value);
        table += '<td class="' + colorClass + '">' + value.toFixed(2) + '</td>';
      }
      table += '</tr>';
    }

    table += '</tbody></table>';
    return table;
  }

  function getColor(value) {
    // You can customize this function to map values to color classes as per your requirements
    // For simplicity, this example uses predefined classes for different ranges
    if (value >= 0.8 ||  value <= -0.8)  {
      return 'heatmap-cell-1';
    } else if (value >= 0.6  ||  value <= -0.6) {
      return 'heatmap-cell-2';
    } else if (value >= 0.4  || value <= -0.4) {
      return 'heatmap-cell-3';
    } else if (value >= 0.2 || value <= -0.2) {
      return 'heatmap-cell-4';
    } else if (value >= -0.2) {
      return 'heatmap-cell-5';
    } else {
      return 'heatmap-cell-6';
    }
  }
  // Example data
  var correlationData = [
    {'index': 'grade', 'grade': 1.0, 'annual_inc': 0.0054441397354406335, 'home_ownership': 0.08295875882958355, 'dti': 0.06429265569343882, 'purpose': 0.20464436290951332, 'term': 0.3537979696222608, 'revol_util': 0.16843218702728885, 'bad_loan': 0.18869429501710358},
    {'index': 'annual_inc', 'grade': 0.0054441397354406335, 'annual_inc': 1.0, 'home_ownership': 0.19183170421873416, 'dti': 0.14105609914981013, 'purpose': 0.021732765294629756, 'term': -0.11431298629614177, 'revol_util': -0.05260793506821007, 'bad_loan': 0.12302944304095516},
    {'index': 'home_ownership', 'grade': 0.08295875882958355, 'annual_inc': 0.19183170421873416, 'home_ownership': 1.0, 'dti': 0.013097107661500643, 'purpose': 0.04891392700096266, 'term': -0.09137978111525066, 'revol_util': 0.013428536685818582, 'bad_loan': 0.06874795954709552},
    {'index': 'dti', 'grade': 0.06429265569343882, 'annual_inc': 0.14105609914981013, 'home_ownership': 0.013097107661500643, 'dti': 1.0, 'purpose': -0.028120642129720676, 'term': 0.04241080861993266, 'revol_util': 0.054333180518763645, 'bad_loan': 0.11843738062057005},
    {'index': 'purpose', 'grade': 0.20464436290951332, 'annual_inc': 0.021732765294629756, 'home_ownership': 0.04891392700096266, 'dti': -0.028120642129720676, 'purpose': 1.0, 'term': -0.02241860957265085, 'revol_util': -0.017087883774760636, 'bad_loan': 0.05437150307992627},
    {'index': 'term', 'grade': 0.3537979696222608, 'annual_inc': -0.11431298629614177, 'home_ownership': -0.09137978111525066, 'dti': 0.04241080861993266, 'purpose': -0.02241860957265085, 'term': 1.0, 'revol_util': 0.06002353279332895, 'bad_loan': 0.13112421088894832},
    {'index': 'revol_util', 'grade': 0.16843218702728885, 'annual_inc': -0.05260793506821007, 'home_ownership': 0.013428536685818582, 'dti': 0.054333180518763645, 'purpose': -0.017087883774760636, 'term': 0.06002353279332895, 'revol_util': 1.0, 'bad_loan': 0.07283137861585783},
    {'index': 'bad_loan', 'grade': 0.18869429501710358, 'annual_inc': 0.12302944304095516, 'home_ownership': 0.06874795954709552, 'dti': 0.11843738062057005, 'purpose': 0.05437150307992627, 'term': 0.13112421088894832, 'revol_util': 0.07283137861585783, 'bad_loan': 1.0}
  ];

  // Display table with heatmap
  var tableHtml = generateTable(correlationData);
  document.body.innerHTML += tableHtml;
</script>

</body>
</html>
